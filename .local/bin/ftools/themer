if [ $# -lt 1 ]; then
	echo "Usage: themer <path-to-file>"
	exit
fi

setbg $1
wal -i $1

# Right now, load-firefox-css gets its colors from env and if we dont
# reload bashrc, those variables will still be for the old theme.
# This should probably be changed..
. ~/.dotfiles/.bashrc

# Generate new firefox userChrome.css and userContent.css
bash ~/.dotfiles/.local/bin/ftools/load-firefox-css

if [ "$2" = "no-reload" ]; then
	exit
fi

if [ "$2" = "post-setup" ]; then
	exit
else
	wal-steam -w

	echo "To fully set the new theme we need to logout (It refreshes the i3bar with the new colors)"
	read -p "Exit now? (Y/n)" EXIT

	if [ "$EXIT" = "" ] || [ "$EXIT" = "Y" ]; then
		i3-msg exit	
	fi
fi

