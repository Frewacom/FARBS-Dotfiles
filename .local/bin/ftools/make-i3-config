#!/usr/bin/bash

CONFIG_TEMPLATE_PATH=~/.dotfiles/.config/i3/config.template
CONFIG_PATH=~/.config/i3/config

function replace() {
    if [ -z "$2" ] && [ ! "$2" = "" ]; then
	# If the var is not set in the profile exports
	# use $3 instead (fallback value)
	sed -i "s/$1/$3/g" $CONFIG_PATH
    else
	sed -i "s/$1/$2/g" $CONFIG_PATH
    fi
}

# Remove if exists
[ -f $CONFIG_PATH ] && rm $CONFIG_PATH

cp $CONFIG_TEMPLATE_PATH $CONFIG_PATH

# These are not going to change via the profile
replace "<wal-light>" $WAL_LIGHT "#f0f0f0"
replace "<wal-dark>" $WAL_DARK "#f0f0f0"
replace "<wal-bg-dark>" $WAL_BG_DARK "#111111"
replace "<wal-bg-light>" $WAL_BG_LIGHT "#222222"
replace "<wal-critical>" $WAL_CRITICAL "#fc0206"
replace "<wal-success>" $WAL_SUCCESS "#0eef28"

# These will be loaded from the profile
replace "<bar-background>" 	$PROFILE_BAR_BACKGROUND "$WAL_BG_DARK"
replace "<window-border-size>" 	$PROFILE_WINDOW_BORDER_SIZE "1"

replace "<gaps-inner>" 		$PROFILE_GAPS_INNER "4"
replace "<gaps-outer>" 		$PROFILE_GAPS_OUTER "2"

replace "<ws-emacs>" 		$PROFILE_WS_EMACS "7"
replace "<ws-spotify>"		$PROFILE_WS_SPOTIFY "6"
replace "<ws-discord>" 		$PROFILE_WS_DISCORD "5"
replace "<ws-steam>" 		$PROFILE_WS_STEAM "4"
replace "<ws-firefox>" 		$PROFILE_WS_FIREFOX "2"

replace "<ws1-name>" 		$PROFILE_WS1_NAME "1"
replace "<ws2-name>" 		$PROFILE_WS2_NAME "2"
replace "<ws3-name>" 		$PROFILE_WS3_NAME "3"
replace "<ws4-name>" 		$PROFILE_WS4_NAME "4"
replace "<ws5-name>" 		$PROFILE_WS5_NAME "5"
replace "<ws6-name>" 		$PROFILE_WS6_NAME "6"
replace "<ws7-name>" 		$PROFILE_WS7_NAME "7"
replace "<ws8-name>" 		$PROFILE_WS8_NAME "8"
replace "<ws9-name>" 		$PROFILE_WS9_NAME "9"
replace "<ws10-name>" 		$PROFILE_WS10_NAME "10"

 
