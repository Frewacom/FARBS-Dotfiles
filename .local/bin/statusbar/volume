#!/bin/sh

case $BLOCK_BUTTON in
#	1) setsid "$TERMINAL" -e pulsemixer & ;;
	1) i3-msg "exec --no-startup-id $TERMINAL -c "floating-pulsemixer" -e pulsemixer" &> /dev/null ;;
	2) pulsemixer --toggle-mute ;;
	4) pulsemixer --change-volume +5 ;;
	5) pulsemixer --change-volume -5 ;;
esac

[ "$(pulsemixer --get-mute)" = "1" ] && printf "<span color='$(xgetres critical)'></span>\\n" && exit

vol=$(pulsemixer --get-volume | awk '{print $1}')

if [ "$vol" -gt "50" ]; then
	icon=""
elif [ "$vol" -eq "0" ]; then
	icon=""
else
	icon=""
fi

printf "%s <span color='$(xgetres accentText)'>%s%%</span>" "$icon" "$vol"
