#!/bin/sh
# Give a battery name (e.g. BAT0) as an argument.

capacity=$(cat /sys/class/power_supply/"$1"/capacity) || exit
status=$(cat /sys/class/power_supply/"$1"/status)

color="#ffffff"

if [ "$capacity" -ge 90 ]; then
	label=""
elif [ "$capacity" -ge 65 ]; then
	label=""
elif [ "$capacity" -ge 40 ]; then
	label=""
elif [ "$capacity" -ge 15 ]; then
	label=""
	color="$WAL_LIGHT"
else
	label=""
	color="$WAL_CRITICAL"
fi


if [ "$status" = "Charging" ]; then
	color="$WAL_SUCCESS"
	label=""
fi

[ "$capacity" -eq 100 ] && color="$WAL_SUCCESS"

printf "<span color='%s'>%s %s</span>" "$color" "$label" "$(echo "$capacity" | sed -e 's/$/%/')"
