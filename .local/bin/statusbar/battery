#!/bin/sh
# Give a battery name (e.g. BAT0) as an argument.

capacity=$(cat /sys/class/power_supply/"$1"/capacity) || exit
status=$(cat /sys/class/power_supply/"$1"/status)

color_label="#ffffff"
color_capacity="$WAL_LIGHT"

if [ "$capacity" -ge 90 ]; then
	label=""
elif [ "$capacity" -ge 65 ]; then
	label=""
elif [ "$capacity" -ge 40 ]; then
	label=""
elif [ "$capacity" -ge 15 ]; then
	label=""
else
	label=""
	color="$WAL_CRITICAL"
fi


if [ "$status" = "Charging" ]; then
	color_label="$WAL_SUCCESS"
	color_capacity="$WAL_SUCCESS"
	label=""
fi

if [ "$status" = "Full" ]; then
	color_label="$WAL_SUCCESS"
	color_capacity="$WAL_SUCCESS"
	label=""
fi

printf "<span color='%s'>%s</span> <span color='%s'>%s%%</span>" "$color_label" "$label" "$color_capacity" "$capacity"
